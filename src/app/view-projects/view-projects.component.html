

<div *ngIf="projects.length === 0" class="text-center noproject-text">
  <h4 class="text-muted">No projects to display</h4>
  <button class="btn btn-primary mt-3" routerLink="/add-project" >Create Project</button>
</div>
<app-nav-bar></app-nav-bar>

  <table class="table table-hover"  *ngIf="projects.length > 0">
    <thead class="table-primary">
      <tr  >
       
        <th  scope="col">Title</th>
        <th scope="col">CreatedBy</th>
        <th scope="col">Project Manager</th>
        <th scope="col">Start Date</th>
        <th scope="col">End Date</th>
        <th scope="col">Due Date</th>
        <th scope="col"></th>
        <th scope="col"></th>
        <th scope="col"></th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let project of projects; let i = index">
        
        <td  class="tablecolor">{{ project.title }}</td>
        <td  class="tablecolor">{{ project.createdBy}}</td>
        <td  class="tablecolor">{{ project.projectManager}}</td>
        <td  class="tablecolor">{{project.startDate}}</td>
        <td  class="tablecolor">{{project.endDate}}</td>
       
        <td class="tablecolor">{{project.dueDate}}</td>
       
        <td class="tablecolor">
            
            <button type="button" class="btn " (click)="openTaskForm(i)">Add Task</button>
            
          </td>

          <td class="tablecolor">
            
            <button type="button" class="btn "  [routerLink]="['/tasks',project.title]" >
                View Task</button>
            
          </td>
           <td class="tablecolor">
            
            <button type="button" class="btn "  (click)="deleteProject(i)" >
               Delete Project</button>
            
          </td>
      </tr>
     
    </tbody>
  </table>

  <!--add task -->
<div id="taskModal" class="modal fade" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Add Task</h5>
          <button type="button" class="btn-close" (click)="closeTaskForm()"></button>
        </div>
        <div class="modal-body">
          <form #taskForm="ngForm">
            <div class="mb-3">
              <label class="form-label">Task Title</label>
              <input
                type="text"
                class="form-control"
                name="title"
                [(ngModel)]="newTask.title"
                required
                #title="ngModel"
              />
              <div *ngIf="title.invalid && title.touched">
                <small class="text-danger">Task title is required.</small>
              </div>
            </div>
          
            <div class="mb-3">
              <label class="form-label">Assigned To</label>
              <input
                type="text"
                class="form-control"
                name="assignedTo"
                [(ngModel)]="newTask.assignedTo"
                required
                #assignedTo="ngModel"
              />
              <div *ngIf="assignedTo.invalid && assignedTo.touched">
                <small class="text-danger">Assigned To is required.</small>
              </div>
            </div>
          
            <div class="mb-3">
              <label class="form-label">Status</label>
              <select
                class="form-select"
                name="status"
                [(ngModel)]="newTask.status"
                required
                #status="ngModel"
              >
                <option value="" disabled selected>Select status</option>
                <option value="Pending">Pending</option>
                <option value="In Progress">In Progress</option>
                <option value="Completed">Completed</option>
              </select>
              <div *ngIf="status.invalid && status.touched">
                <small class="text-danger">Status is required.</small>
              </div>
            </div>
          
            <div class="mb-3">
              <label class="form-label">Assigned User</label>
              <input
                type="text"
                class="form-control"
                name="assignedUser"
                [(ngModel)]="newTask.assignedUser"
                required
                #assignedUser="ngModel"
              />
              <div *ngIf="assignedUser.invalid && assignedUser.touched">
                <small class="text-danger">Assigned User is required.</small>
              </div>
            </div>
          
            <div class="mb-3">
              <label class="form-label">Estimate</label>
              <input
                type="time"
                class="form-control"
                name="estimate"
                [(ngModel)]="newTask.estimate"
                required
                #estimate="ngModel"
              />
              <div *ngIf="estimate.invalid && estimate.touched">
                <small class="text-danger">Estimate is required.</small>
              </div>
            </div>
          
            <div class="mb-3">
              <label class="form-label">Time Spent</label>
              <input
                type="time"
                class="form-control"
                name="timeSpent"
                [(ngModel)]="newTask.timeSpent"
                required
                #timeSpent="ngModel"
              />
              <div *ngIf="timeSpent.invalid && timeSpent.touched">
                <small class="text-danger">Time Spent is required.</small>
              </div>
            </div>
          </form>
          
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" (click)="closeTaskForm()">Close</button>
          <button type="button" class="btn btn-primary" [disabled]="taskForm.invalid" (click)="addTask()">
            Add Task
          </button>
        </div>
      </div>
    </div>
  </div>
  